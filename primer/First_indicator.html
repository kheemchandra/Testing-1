<div id="right-column">
<div aria-label="breadcrumbs navigation" role="navigation">
<ol class="breadcrumb">
<li><a href="../index.html">User Manual</a></li>
<li><a href="index.html">Pine Script™ primer</a></li>
<li>First indicator</li>
</ol>
</div>
<div class="document clearer body">
<a class="reference external image-reference" href="https://www.tradingview.com/pine-script-docs/en/v5/Introduction.html"><div align="right" class="align-right"><img alt="Pine Script™ logo" height="100" src="../_images/Pine_Script_logo.svg" width="100"/></div>
</a>
<div class="section" id="first-indicator">
<span id="pagefirstindicator"></span><h1>First indicator<a class="headerlink" href="#first-indicator" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#the-pine-script-editor" id="id1">The Pine Script™ Editor</a></li>
<li><a class="reference internal" href="#first-version" id="id2">First version</a></li>
<li><a class="reference internal" href="#second-version" id="id3">Second version</a></li>
<li><a class="reference internal" href="#next" id="id4">Next</a></li>
</ul>
</div>
<div class="section" id="the-pine-script-editor">
<h2><a class="toc-backref" href="#id1">The Pine Script™ Editor</a><a class="headerlink" href="#the-pine-script-editor" title="Permalink to this headline">¶</a></h2>
<p>The Pine Script™ Editor is where you will be working on your scripts. While you can use any text editor you want to write your Pine scripts,
using our Editor has many advantages:</p>
<ul class="simple">
<li>It highlights your code following Pine Script™ syntax.</li>
<li>It pops up syntax reminders for built-in and library functions when you hover over them.</li>
<li>It provides quick access to the Pine Script™ v5 Reference Manual popup when you <kbd class="kbd docutils literal notranslate">ctrl</kbd> + <kbd class="kbd docutils literal notranslate">click</kbd> / <kbd class="kbd docutils literal notranslate">cmd</kbd> + <kbd class="kbd docutils literal notranslate">click</kbd> on Pine Script™ keywords.</li>
<li>It provides an auto-complete feature that you can activate with <kbd class="kbd docutils literal notranslate">ctrl</kbd> + <kbd class="kbd docutils literal notranslate">space</kbd> / <kbd class="kbd docutils literal notranslate">cmd</kbd> + <kbd class="kbd docutils literal notranslate">space</kbd>.</li>
<li>It makes the write/compile/run cycle fast because saving a new version of a script loaded on the chart also executes it immediately.</li>
<li>While not as feature-rich as the top editors out there, it provides key functionality such as search and replace, multi-cursor and versioning.</li>
</ul>
<p>To open the Editor, click on the “Pine Script™ Editor” tab at the bottom of your TradingView chart. This will open up the Editor’s pane.</p>
</div>
<div class="section" id="first-version">
<h2><a class="toc-backref" href="#id2">First version</a><a class="headerlink" href="#first-version" title="Permalink to this headline">¶</a></h2>
<p>We will now create our first working Pine script, an implementation of the
<a class="reference external" href="https://www.tradingview.com/support/solutions/43000502344-macd-moving-average-convergence-divergence/">MACD</a> indicator in Pine Script™:</p>
<div class="highlight-pine notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"MACD #1"</span><span class="p">)</span><span class="w"></span>
<span class="nx">fast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="w"></span>
<span class="nx">slow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">26</span><span class="w"></span>
<span class="nx">fastMA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">ta.ema</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">fast</span><span class="p">)</span><span class="w"></span>
<span class="nx">slowMA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">ta.ema</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">slow</span><span class="p">)</span><span class="w"></span>
<span class="nx">macd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fastMA</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">slowMA</span><span class="w"></span>
<span class="nx">signal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">ta.ema</span><span class="p">(</span><span class="nx">macd</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span><span class="w"></span>
<span class="ni">plot</span><span class="p">(</span><span class="nx">macd</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.blue</span><span class="p">)</span><span class="w"></span>
<span class="ni">plot</span><span class="p">(</span><span class="nx">signal</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.orange</span><span class="p">)</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<ul class="simple">
<li>Start by bringing up the “Open” dropdown menu at the top right of the Editor and choose “New blank indicator”.</li>
<li>Then copy the example script above, taking care not to include the line numbers in your selection.</li>
<li>Select all the code already in the editor and replace it with the example script.</li>
<li>Click “Save” and choose a name for your script. Your script is now saved in TradingView’s cloud, but under your account’s name. Nobody but you can use it.</li>
<li>Click “Add to Chart” in the Editor’s menu bar. The MACD indicator appears in a separate <em>Pane</em> under your chart.</li>
</ul>
<p>Your first Pine script is running on your chart, which should look like this:</p>
<img alt="../_images/FirstIndicator-Version1.png" src="../_images/FirstIndicator-Version1.png"/>
<p>Let’s look at our script’s code, line by line:</p>
<dl class="docutils">
<dt>Line 1: <code class="docutils literal notranslate"><span class="pre">//@version=5</span></code></dt>
<dd>This is a comment containing a compiler directive that tells the compiler the script will use version 5 of Pine Script™.</dd>
<dt>Line 2: <code class="docutils literal notranslate"><span class="pre">indicator("MACD</span> <span class="pre">#1")</span></code></dt>
<dd>Defines the name of the script that will appear on the chart as “MACD”.</dd>
<dt>Line 3: <code class="docutils literal notranslate"><span class="pre">fast</span> <span class="pre">=</span> <span class="pre">12</span></code></dt>
<dd>Defines a <code class="docutils literal notranslate"><span class="pre">fast</span></code> integer variable which will be the length of the fast EMA.</dd>
<dt>Line 4: <code class="docutils literal notranslate"><span class="pre">slow</span> <span class="pre">=</span> <span class="pre">26</span></code></dt>
<dd>Defines a <code class="docutils literal notranslate"><span class="pre">slow</span></code> integer variable which will be the length of the slow EMA.</dd>
<dt>Line 5: <code class="docutils literal notranslate"><span class="pre">fastMA</span> <span class="pre">=</span> <span class="pre">ta.ema(close,</span> <span class="pre">fast)</span></code></dt>
<dd>Defines the variable <code class="docutils literal notranslate"><span class="pre">fastMA</span></code>, containing the result of the
EMA calculation (Exponential Moving Average) with a length equal
to <code class="docutils literal notranslate"><span class="pre">fast</span></code> (12), on the <code class="docutils literal notranslate"><span class="pre">close</span></code> series, i.e., the closing price of bars.</dd>
<dt>Line 6: <code class="docutils literal notranslate"><span class="pre">slowMA</span> <span class="pre">=</span> <span class="pre">ta.ema(close,</span> <span class="pre">slow)</span></code></dt>
<dd>Defines the variable <code class="docutils literal notranslate"><span class="pre">slowMA</span></code>, containing the result of the
EMA calculation with a length equal to <code class="docutils literal notranslate"><span class="pre">slow</span></code> (26), from <code class="docutils literal notranslate"><span class="pre">close</span></code>.</dd>
<dt>Line 7: <code class="docutils literal notranslate"><span class="pre">macd</span> <span class="pre">=</span> <span class="pre">fastMA</span> <span class="pre">-</span> <span class="pre">slowMA</span></code></dt>
<dd>Defines the variable <code class="docutils literal notranslate"><span class="pre">macd</span></code> as the difference between the two EMAs.</dd>
<dt>Line 8: <code class="docutils literal notranslate"><span class="pre">signal</span> <span class="pre">=</span> <span class="pre">ta.ema(macd,</span> <span class="pre">9)</span></code></dt>
<dd>Defines the variable <code class="docutils literal notranslate"><span class="pre">signal</span></code> as a smoothed value of
<code class="docutils literal notranslate"><span class="pre">macd</span></code> using the EMA algorithm (Exponential Moving Average) with
a length of 9.</dd>
<dt>Line 9: <code class="docutils literal notranslate"><span class="pre">plot(macd,</span> <span class="pre">color</span> <span class="pre">=</span> <span class="pre">color.blue)</span></code></dt>
<dd>Calls the <code class="docutils literal notranslate"><span class="pre">plot</span></code> function to output the variable <code class="docutils literal notranslate"><span class="pre">macd</span></code> using a blue line.</dd>
<dt>Line 10: <code class="docutils literal notranslate"><span class="pre">plot(signal,</span> <span class="pre">color</span> <span class="pre">=</span> <span class="pre">color.orange)</span></code></dt>
<dd>Calls the <code class="docutils literal notranslate"><span class="pre">plot</span></code> function to output the variable <code class="docutils literal notranslate"><span class="pre">signal</span></code> using an orange line.</dd>
</dl>
</div>
<div class="section" id="second-version">
<h2><a class="toc-backref" href="#id3">Second version</a><a class="headerlink" href="#second-version" title="Permalink to this headline">¶</a></h2>
<p>The first version of our script calculated MACD “manually”, but because Pine Script™ is designed to write indicators and strategies,
built-in Pine Script™ functions exist for many common indicators, including one for… MACD: <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta{dot}macd">ta.macd()</a>.</p>
<p>This is the second version of our script:</p>
<div class="highlight-pine notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"MACD #2"</span><span class="p">)</span><span class="w"></span>
<span class="nx">fastInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">input</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="s2">"Fast length"</span><span class="p">)</span><span class="w"></span>
<span class="nx">slowInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">input</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="s2">"Slow length"</span><span class="p">)</span><span class="w"></span>
<span class="o">[</span><span class="nx">macdLine</span><span class="p">,</span><span class="w"> </span><span class="nx">signalLine</span><span class="p">,</span><span class="w"> </span><span class="nx">histLine</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">ta.macd</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">fastInput</span><span class="p">,</span><span class="w"> </span><span class="nx">slowInput</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span><span class="w"></span>
<span class="ni">plot</span><span class="p">(</span><span class="nx">macdLine</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.blue</span><span class="p">)</span><span class="w"></span>
<span class="ni">plot</span><span class="p">(</span><span class="nx">signalLine</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.orange</span><span class="p">)</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<p>Note that we have:</p>
<ul class="simple">
<li>Added inputs so we can change the lengths for the MAs</li>
<li>We now use the <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta{dot}macd">ta.macd()</a>
Pine Script™ built-in to calculate our MACD, which saves us three line and makes our code easier to read.</li>
</ul>
<p>Let’s repeat the same process as before to copy that code in a new indicator:</p>
<ul class="simple">
<li>Start by bringing up the “Open” dropdown menu at the top right of the Editor and choose “New blank indicator”.</li>
<li>Then copy the example script above, again taking care not to include the line numbers in your selection.</li>
<li>Select all the code already in the editor and replace it with the second version of our script.</li>
<li>Click “Save” and choose a name for your script different than the previous one.</li>
<li>Click “Add to Chart” in the Editor’s menu bar. The “MACD #2” indicator appears in a separate <em>Pane</em> under the “MACD #1” indicator.</li>
</ul>
<p>Your second Pine script is running on your chart. If you double-click on the indicator’s name on your chart,
you will bring up the script’s “Settings/Inputs” tab, where you can now change the slow and fast lengths:</p>
<img alt="../_images/FirstIndicator-Version2.png" src="../_images/FirstIndicator-Version2.png"/>
<p>Let’s look at the lines that have changed in the second version of our script:</p>
<dl class="docutils">
<dt>Line 2: <code class="docutils literal notranslate"><span class="pre">indicator("MACD</span> <span class="pre">#2")</span></code></dt>
<dd>We have changed <code class="docutils literal notranslate"><span class="pre">#1</span></code> to <code class="docutils literal notranslate"><span class="pre">#2</span></code> so the second version of our indicator displays a different name on the chart.</dd>
<dt>Line 3: <code class="docutils literal notranslate"><span class="pre">fastInput</span> <span class="pre">=</span> <span class="pre">input(12,</span> <span class="pre">"Fast</span> <span class="pre">length")</span></code></dt>
<dd>Instead of assigning a constant value to a variable, we have used the <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_input">input()</a>
function so we can change the value in our script’s “Settings/Inputs” tab. <code class="docutils literal notranslate"><span class="pre">12</span></code> will be the default value and the field’s label will be <code class="docutils literal notranslate"><span class="pre">"Fast</span> <span class="pre">length"</span></code>.
If the value is changed in the “Inputs” tab, the <code class="docutils literal notranslate"><span class="pre">fastInput</span></code> variable’s content will contain the new value and the script will re-execute on the chart with that new value.
Note that, as our <a class="reference internal" href="../writing/Style_guide.html#pagestyleguide"><span class="std std-ref">Pine Script™ Style Guide</span></a> recommends, we add <code class="docutils literal notranslate"><span class="pre">Input</span></code> to the end of the variable’s name to remind us, later in the script,
that its value comes from a user input.</dd>
<dt>Line 4: <code class="docutils literal notranslate"><span class="pre">slowInput</span> <span class="pre">=</span> <span class="pre">input(26,</span> <span class="pre">"Slow</span> <span class="pre">length")</span></code></dt>
<dd>We do the same for the slow length, taking care to use a different variable name, default value and text string for the field’s label.</dd>
<dt>Line 5: <code class="docutils literal notranslate"><span class="pre">[macdLine,</span> <span class="pre">signalLine,</span> <span class="pre">histLine]</span> <span class="pre">=</span> <span class="pre">ta.macd(close,</span> <span class="pre">fastInput,</span> <span class="pre">slowInput,</span> <span class="pre">9)</span></code></dt>
<dd>This is where we call the <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta{dot}macd">ta.macd()</a> built-in to
perform all the first version’s calculations in one line only. The function requires four parameters (the values after the function name, enclosed in parentheses).
It returns three values into the three variables instead of only one, like the functions we used until now, which is why we need to enclose the list of three
variables receiving the function’s result in square brackets, to the left of the <code class="docutils literal notranslate"><span class="pre">=</span></code> sign.
Note that two of the values we pass to the function are the “input” variables containing the fast and slow lengths: <code class="docutils literal notranslate"><span class="pre">fastInput</span></code> and <code class="docutils literal notranslate"><span class="pre">slowInput</span></code>.</dd>
<dt>Line 6 and 7:</dt>
<dd>The variable names we are plotting there have changed, but the lines are doing the same thing as in our first version.</dd>
</dl>
<p>Our second version performs the same calculations as our first, but we can change the two lengths used to calculate it.
Our code is also simpler and shorter by three lines. We have improved our script.</p>
</div>
<div class="section" id="next">
<h2><a class="toc-backref" href="#id4">Next</a><a class="headerlink" href="#next" title="Permalink to this headline">¶</a></h2>
<p>We now recommend you go to our <a class="reference internal" href="Next_steps.html#pagenextsteps"><span class="std std-ref">Next Steps</span></a> page.</p>
<a class="reference external image-reference" href="https://www.tradingview.com/"><div align="center" class="align-center"><img alt="../_images/TradingView-Logo-Block.svg" src="../_images/TradingView-Logo-Block.svg" width="200px"/></div>
</a>
</div>
</div>
</div>
<div class="footer-relations">
<div class="pull-left">
<a class="btn btn-default" href="First_steps.html" title="previous chapter (use the left arrow)">First steps</a>
</div>
<div class="pull-right">
<a class="btn btn-default" href="Next_steps.html" title="next chapter (use the right arrow)">Next steps</a>
</div>
</div>
<div class="clearer"></div>
</div>