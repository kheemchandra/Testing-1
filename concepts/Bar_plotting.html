<div id="right-column">
<div aria-label="breadcrumbs navigation" role="navigation">
<ol class="breadcrumb">
<li><a href="../index.html">User Manual</a></li>
<li><a href="index.html">Concepts</a></li>
<li>Bar plotting</li>
</ol>
</div>
<div class="document clearer body">
<a class="reference external image-reference" href="https://www.tradingview.com/pine-script-docs/en/v5/Introduction.html"><div align="right" class="align-right"><img alt="Pine Script™ logo" height="100" src="../_images/Pine_Script_logo.svg" width="100"/></div>
</a>
<div class="section" id="bar-plotting">
<span id="pagebarplotting"></span><h1>Bar plotting<a class="headerlink" href="#bar-plotting" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#plotting-candles-with-plotcandle" id="id2">Plotting candles with `plotcandle()`</a></li>
<li><a class="reference internal" href="#plotting-bars-with-plotbar" id="id3">Plotting bars with `plotbar()`</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle">plotcandle()</a>
built-in function is used to plot candles.
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar">plotbar()</a>
is used to plot conventional bars.</p>
<p>Both functions require four arguments that will be used for the OHLC prices
(<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_open">open</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_high">high</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_low">low</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_close">close</a>)
of the bars they will be plotting.
If one of those is <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_na">na</a>, no bar is plotted.</p>
</div>
<div class="section" id="plotting-candles-with-plotcandle">
<h2><a class="toc-backref" href="#id2">Plotting candles with `plotcandle()`</a><a class="headerlink" href="#plotting-candles-with-plotcandle" title="Permalink to this headline">¶</a></h2>
<p>The signature of <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle">plotcandle()</a> is:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="ni">plotcandle</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="ni">color</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="p">,</span><span class="w"> </span><span class="nx">editable</span><span class="p">,</span><span class="w"> </span><span class="nx">show_last</span><span class="p">,</span><span class="w"> </span><span class="nx">bordercolor</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="nx">void</span><span class="w"></span>
</pre></div>
</div>
<p>This plots simple candles, all in blue, using the habitual OHLC values, in a separate pane:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Single-color candles"</span><span class="p">)</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-1.png" src="../_images/BarPlotting-Plotcandle-1.png"/>
<p>To color them green or red, we can use the following code:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Example 2"</span><span class="p">)</span><span class="w"></span>
<span class="nx">paletteColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">close</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="no">open</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.lime</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.red</span><span class="w"></span>
<span class="ni">plotbar</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">paletteColor</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-2.png" src="../_images/BarPlotting-Plotcandle-2.png"/>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">color</span></code> parameter accepts “series color” arguments,
so constant values such as <code class="docutils literal notranslate"><span class="pre">color.red</span></code>, <code class="docutils literal notranslate"><span class="pre">color.lime</span></code>, <code class="docutils literal notranslate"><span class="pre">"#FF9090"</span></code>,
as well as expressions that calculate colors at runtime,
as is done with the <code class="docutils literal notranslate"><span class="pre">paletteColor</span></code> variable here, will all work.</p>
<p>You can build bars or candles using values other than the actual OHLC values.
For example you could calculate and plot smoothed candles using the following code,
which also colors wicks depending on the position of
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_close">close</a>
relative to the smoothed close (<code class="docutils literal notranslate"><span class="pre">c</span></code>) of our indicator:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Smoothed candles"</span><span class="p">,</span><span class="w"> </span><span class="nx">overlay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">true</span><span class="p">)</span><span class="w"></span>
<span class="nx">lenInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">input.int</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w"></span>
<span class="nx">smooth</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">    </span><span class="ni">ta.sma</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="nx">length</span><span class="p">)</span><span class="w"></span>
<span class="nx">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">smooth</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="nx">lenInput</span><span class="p">)</span><span class="w"></span>
<span class="nx">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">smooth</span><span class="p">(</span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="nx">lenInput</span><span class="p">)</span><span class="w"></span>
<span class="nx">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">smooth</span><span class="p">(</span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="nx">lenInput</span><span class="p">)</span><span class="w"></span>
<span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">smooth</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">lenInput</span><span class="p">)</span><span class="w"></span>
<span class="nx">ourWickColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">close</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.green</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.red</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="w"> </span><span class="nx">h</span><span class="p">,</span><span class="w"> </span><span class="nx">l</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ourWickColor</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-3.png" src="../_images/BarPlotting-Plotcandle-3.png"/>
<p>You may find it useful to plot OHLC values taken from a
higher timeframe. You can, for example, plot daily bars on an intraday chart:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">// NOTE: Use this script on an intraday chart.</span><span class="w"></span>
<span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Daily bars"</span><span class="p">)</span><span class="w"></span>

<span class="c">// Use gaps to only return data when the 1D timeframe completes, `na` otherwise.</span><span class="w"></span>
<span class="o">[</span><span class="nx">o</span><span class="p">,</span><span class="w"> </span><span class="nx">h</span><span class="p">,</span><span class="w"> </span><span class="nx">l</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">request.security</span><span class="p">(</span><span class="ni">syminfo.tickerid</span><span class="p">,</span><span class="w"> </span><span class="s2">"D"</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="nx">gaps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">barmerge.gaps_on</span><span class="p">)</span><span class="w"></span>

<span class="k">var color </span><span class="nx">UP_COLOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.silver</span><span class="w"></span>
<span class="k">var color </span><span class="nx">DN_COLOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.blue</span><span class="w"></span>
<span class="k">color </span><span class="nx">wickColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">UP_COLOR</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">DN_COLOR</span><span class="w"></span>
<span class="k">color </span><span class="nx">bodyColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.new</span><span class="p">(</span><span class="nx">UP_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.new</span><span class="p">(</span><span class="nx">DN_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">)</span><span class="w"></span>
<span class="c">// Only plot candles on intraday timeframes,</span><span class="w"></span>
<span class="c">// and when non `na` values are returned by `request.security()` because a HTF has completed.</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="ni">timeframe.isintraday</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="no">na</span><span class="p">,</span><span class="w"> </span><span class="nx">h</span><span class="p">,</span><span class="w"> </span><span class="nx">l</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">bodyColor</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">wickColor</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotcandle-4.png" src="../_images/BarPlotting-Plotcandle-4.png"/>
<p>Note that:</p>
<ul>
<li><p class="first">We show the script’s plot after having used “Visual Order/Bring to Front” from the script’s “More” menu.
This causes our script’s candles to appear on top of the chart’s candles.</p>
</li>
<li><p class="first">The script will only display candles when two conditions are met:</p>
<blockquote>
<div><ul class="simple">
<li>The chart is using an intraday timeframe (see the check on <code class="docutils literal notranslate"><span class="pre">timeframe.isintraday</span></code> in the
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle">plotcandle()</a> call).
We do this because it’s not useful to show a daily value on timeframes higher or equal to 1D.</li>
<li>The <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}security">request.security()</a>
function returns non <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_na">na</a> values
(see <code class="docutils literal notranslate"><span class="pre">gaps</span> <span class="pre">=</span> <span class="pre">barmerge.gaps_on</span></code> in the function call).</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">We use a tuple (<code class="docutils literal notranslate"><span class="pre">[open,</span> <span class="pre">high,</span> <span class="pre">low,</span> <span class="pre">close]</span></code>) with
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}security">request.security()</a>
to fetch four values in one call.</p>
</li>
<li><p class="first">We use <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_var">var</a> to declare our
<code class="docutils literal notranslate"><span class="pre">UP_COLOR</span></code> and <code class="docutils literal notranslate"><span class="pre">DN_COLOR</span></code> color constants on bar zero only. We use constants because those colors are used
in more than one place in our code. This way, if we need to change them, we need only do so in one place.</p>
</li>
<li><p class="first">We create a lighter transparency for the body of our candles in the <code class="docutils literal notranslate"><span class="pre">bodyColor</span></code> variable initialization,
so they don’t obstruct the chart’s candles.</p>
</li>
</ul>
</div>
<div class="section" id="plotting-bars-with-plotbar">
<h2><a class="toc-backref" href="#id3">Plotting bars with `plotbar()`</a><a class="headerlink" href="#plotting-bars-with-plotbar" title="Permalink to this headline">¶</a></h2>
<p>The signature of <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar">plotbar()</a> is:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="ni">plotbar</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="ni">color</span><span class="p">,</span><span class="w"> </span><span class="nx">editable</span><span class="p">,</span><span class="w"> </span><span class="nx">show_last</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="nx">void</span><span class="w"></span>
</pre></div>
</div>
<p>Note that <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar">plotbar()</a>
has no parameter for <code class="docutils literal notranslate"><span class="pre">bordercolor</span></code> or <code class="docutils literal notranslate"><span class="pre">wickcolor</span></code>, as there are no borders or wicks on conventional bars.</p>
<p>This plots conventional bars using the same coloring logic as in the second example of the previous section:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Dual-color bars"</span><span class="p">)</span><span class="w"></span>
<span class="nx">paletteColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">close</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="no">open</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.lime</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.red</span><span class="w"></span>
<span class="ni">plotbar</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">paletteColor</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<img alt="../_images/BarPlotting-Plotbar-1.png" src="../_images/BarPlotting-Plotbar-1.png"/>
<a class="reference external image-reference" href="https://www.tradingview.com/"><div align="center" class="align-center"><img alt="../_images/TradingView-Logo-Block.svg" src="../_images/TradingView-Logo-Block.svg" width="200px"/></div>
</a>
</div>
</div>
</div>
<div class="footer-relations">
<div class="pull-left">
<a class="btn btn-default" href="Bar_coloring.html" title="previous chapter (use the left arrow)">Bar coloring</a>
</div>
<div class="pull-right">
<a class="btn btn-default" href="Bar_states.html" title="next chapter (use the right arrow)">Bar states</a>
</div>
</div>
<div class="clearer"></div>
</div>