<div id="right-column">
<div aria-label="breadcrumbs navigation" role="navigation">
<ol class="breadcrumb">
<li><a href="../index.html">User Manual</a></li>
<li><a href="index.html">Writing scripts</a></li>
<li>Limitations</li>
</ol>
</div>
<div class="document clearer body">
<a class="reference external image-reference" href="https://www.tradingview.com/pine-script-docs/en/v5/Introduction.html"><div align="right" class="align-right"><img alt="Pine Script™ logo" height="100" src="../_images/Pine_Script_logo.svg" width="100"/></div>
</a>
<div class="section" id="limitations">
<span id="pagelimitations"></span><h1>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#time" id="id2">Time</a><ul>
<li><a class="reference internal" href="#script-compilation" id="id3">Script compilation</a></li>
<li><a class="reference internal" href="#script-execution" id="id4">Script execution</a></li>
<li><a class="reference internal" href="#loop-execution" id="id5">Loop execution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chart-visuals" id="id6">Chart visuals</a><ul>
<li><a class="reference internal" href="#plot-limits" id="id7">Plot limits</a></li>
<li><a class="reference internal" href="#line-box-and-label-limits" id="id8">Line, box, and label limits</a></li>
<li><a class="reference internal" href="#table-limits" id="id9">Table limits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#request-calls" id="id10">`request.*()` calls</a><ul>
<li><a class="reference internal" href="#number-of-calls" id="id11">Number of calls</a></li>
<li><a class="reference internal" href="#intrabars" id="id12">Intrabars</a></li>
</ul>
</li>
<li><a class="reference internal" href="#script-size-and-memory" id="id13">Script size and memory</a><ul>
<li><a class="reference internal" href="#compiled-tokens" id="id14">Compiled tokens</a></li>
<li><a class="reference internal" href="#local-blocks" id="id15">Local blocks</a></li>
<li><a class="reference internal" href="#variables" id="id16">Variables</a></li>
<li><a class="reference internal" href="#arrays-and-matrices" id="id17">Arrays and matrices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-limitations" id="id18">Other limitations</a><ul>
<li><a class="reference internal" href="#maximum-bars-back" id="id19">Maximum bars back</a></li>
<li><a class="reference internal" href="#maximum-bars-forward" id="id20">Maximum bars forward</a></li>
<li><a class="reference internal" href="#chart-bars" id="id21">Chart bars</a></li>
<li><a class="reference internal" href="#trade-orders-in-backtesting" id="id22">Trade orders in backtesting</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>As is mentioned in our <a class="reference internal" href="../Introduction.html#pagewelcometopine"><span class="std std-ref">Welcome</span></a> page:</p>
<blockquote>
<div><em>Because each script uses computational resources in the cloud, we must impose limits in order to share these resources fairly among our users.
We strive to set as few limits as possible, but will of course have to implement as many as needed for the platform to run smoothly.
Limitations apply to the amount of data requested from additional symbols, execution time, memory usage and script size.</em></div></blockquote>
<p>If you develop complex scripts using Pine Script™, sooner or later you will run into some of the limitations we impose.
This section provides you with an overview of the limitations that you may encounter.
There are currently no means for Pine Script™ programmers to get data on the resources consumed by their scripts.
We hope this will change in the future.</p>
<p>In the meantime, when you are considering large projects, it is safest to make a proof of concept
in order to assess the probability of your script running into limitations later in your project.</p>
<p>Here are the limits imposed in the Pine Script™ environment.</p>
</div>
<div class="section" id="time">
<h2><a class="toc-backref" href="#id2">Time</a><a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h2>
<div class="section" id="script-compilation">
<h3><a class="toc-backref" href="#id3">Script compilation</a><a class="headerlink" href="#script-compilation" title="Permalink to this headline">¶</a></h3>
<p>Scripts must compile before they are executed on charts. Compilation occurs when you save a script from the editor or when you add a script to the chart.
A two-minute limit is imposed on compilation time, which will depend on the size and complexity of your script,
and whether or not a cached version of a previous compilation is available.
When a compile exceeds the two-minute limit, a warning is issued.
Heed that warning by shortening your script because after three consecutives warnings a one-hour ban on compilation attempts is enforced.
The first thing to consider when optimizing code is to avoid repetitions by using functions to encapsulate oft-used segments,
and call functions instead of repeating code.</p>
</div>
<div class="section" id="script-execution">
<h3><a class="toc-backref" href="#id4">Script execution</a><a class="headerlink" href="#script-execution" title="Permalink to this headline">¶</a></h3>
<p>Once a script is compiled it can be executed.
See the <a class="reference internal" href="../language/Execution_model.html#pageexecutionmodel-events"><span class="std std-ref">Events triggering the execution of a script</span></a> for a list of the events triggering the execution of a script.
The time allotted for the script to execute on all bars of a dataset varies with account types. The limit is 20 seconds for basic accounts, 40 for others.</p>
</div>
<div class="section" id="loop-execution">
<h3><a class="toc-backref" href="#id5">Loop execution</a><a class="headerlink" href="#loop-execution" title="Permalink to this headline">¶</a></h3>
<p>The execution time for any loop on any single bar is limited to 500 milliseconds.
The outer loop of embedded loops counts as one loop, so it will time out first.
Keep in mind that even though a loop may execute under the 500 ms time limit on a given bar,
the time it takes to execute on all the dataset’s bars may nonetheless cause your script to exceed the total execution time limit.
For example, the limit on total execution time will make it impossible for you script to execute a 400 ms loop on each bar of a 20,000-bar dataset
because your script would then need 8,000 seconds to execute.</p>
</div>
</div>
<div class="section" id="chart-visuals">
<h2><a class="toc-backref" href="#id6">Chart visuals</a><a class="headerlink" href="#chart-visuals" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plot-limits">
<h3><a class="toc-backref" href="#id7">Plot limits</a><a class="headerlink" href="#plot-limits" title="Permalink to this headline">¶</a></h3>
<p>A maximum of 64 plot counts is allowed per script. The functions generating plot counts are:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plot">plot()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotarrow">plotarrow()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar">plotbar()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle">plotcandle()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotchar">plotchar()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotshape">plotshape()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_alertcondition">alertcondition()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_bgcolor">bgcolor()</a></li>
</ul>
<p>The following functions do not generate plot counts:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_hline">hline()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_fill">fill()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_line{dot}new">line.new()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_label{dot}new">label.new()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_table{dot}new">table.new()</a></li>
<li><a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_box{dot}new">box.new()</a></li>
</ul>
<p>One function call can generate from one to seven plot counts, depending on the function and how it is called.
When your script exceeds the maximum of 64 plot counts, the runtime error message will display the plot count generated by your script.
Once you reach that point, you can determine how many plot counts a function call generates by commenting it out in a script.
As long as your script still throws an error, you will be able to see how the actual plot count decreases after you have commented out a line.</p>
<p>The following example shows different function calls and the number of plot counts each one will generate:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Plot count example"</span><span class="p">)</span><span class="w"></span>

<span class="k">bool </span><span class="nx">isUp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">close</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="no">open</span><span class="w"></span>
<span class="k">color </span><span class="nx">isUpColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUp</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.green</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.red</span><span class="w"></span>
<span class="k">bool </span><span class="nx">isDn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">not</span><span class="w"> </span><span class="nx">isUp</span><span class="w"></span>
<span class="k">color </span><span class="nx">isDnColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isDn</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.red</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.green</span><span class="w"></span>

<span class="c">// Uses one plot count.</span><span class="w"></span>
<span class="ni">plot</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses two plot counts for the `close` and `color` series.</span><span class="w"></span>
<span class="ni">plot</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses one plot count for the `close` series.</span><span class="w"></span>
<span class="ni">plotarrow</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">colorup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.green</span><span class="p">,</span><span class="w"> </span><span class="nx">colordown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.red</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses two plot counts for the `close` and `colorup` series.</span><span class="w"></span>
<span class="ni">plotarrow</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="nx">colorup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses three plot counts for the `close`, `colorup`, and the `colordown` series.</span><span class="w"></span>
<span class="ni">plotarrow</span><span class="p">(</span><span class="no">close</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="nx">colorup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">colordown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isDnColor</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses four plot counts for the `open`, `high`, `low`, and `close` series.</span><span class="w"></span>
<span class="ni">plotbar</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses five plot counts for the `open`, `high`, `low`, `close`, and `color` series.</span><span class="w"></span>
<span class="ni">plotbar</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses four plot counts for the `open`, `high`, `low`, and `close` series.</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">,</span><span class="w"> </span><span class="nx">bordercolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.purple</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses five plot counts for the `open`, `high`, `low`, `close`, and `color` series.</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">,</span><span class="w"> </span><span class="nx">bordercolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.purple</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses six plot counts for the `open`, `high`, `low`, `close`, `color`, and `wickcolor` series.</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nx">bordercolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.purple</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses seven plot counts for the `open`, `high`, `low`, `close`, `color`, `wickcolor`, and `bordercolor` series.</span><span class="w"></span>
<span class="ni">plotcandle</span><span class="p">(</span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="no">low</span><span class="p">,</span><span class="w"> </span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">wickcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nx">bordercolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUp</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.lime</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.maroon</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses one plot count for the `close` series.</span><span class="w"></span>
<span class="ni">plotchar</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"|"</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses two plot counts for the `close`` and `color` series.</span><span class="w"></span>
<span class="ni">plotchar</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"—"</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses three plot counts for the `close`, `color`, and `textcolor` series.</span><span class="w"></span>
<span class="ni">plotchar</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUp</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.yellow</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses one plot count for the `close` series.</span><span class="w"></span>
<span class="ni">plotshape</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses two plot counts for the `close` and `color` series.</span><span class="w"></span>
<span class="ni">plotshape</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses three plot counts for the `close`, `color`, and `textcolor` series.</span><span class="w"></span>
<span class="ni">plotshape</span><span class="p">(</span><span class="no">close</span><span class="p">,</span><span class="w"> </span><span class="k">color </span><span class="o">=</span><span class="w"> </span><span class="nx">isUpColor</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isUp</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.yellow</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses one plot count.</span><span class="w"></span>
<span class="ni">alertcondition</span><span class="p">(</span><span class="no">close</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="no">open</span><span class="p">,</span><span class="w"> </span><span class="s2">"close &gt; open"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Up bar alert"</span><span class="p">)</span><span class="w"></span>

<span class="c">// Uses one plot count.</span><span class="w"></span>
<span class="ni">bgcolor</span><span class="p">(</span><span class="nx">isUp</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="ni">color.yellow</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ni">color.white</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>The example generates a plot count of 54. If you add three instances of the last call to
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle">plotcandle()</a>
the script will throw an error stating the script now uses 75 plot counts, because the three additional calls to
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle">plotcandle()</a>
each generate seven plot counts, and 54 + 21 is 75.</p>
</div>
<div class="section" id="line-box-and-label-limits">
<h3><a class="toc-backref" href="#id8">Line, box, and label limits</a><a class="headerlink" href="#line-box-and-label-limits" title="Permalink to this headline">¶</a></h3>
<p>Contrary to plots which can cover the entire dataset, by default, only the last 50 lines drawn by a script are visible on charts.
The same goes for boxes and labels. You can increase the quantity of drawing objects preserved on charts up to a maximum of 500 by using the
<code class="docutils literal notranslate"><span class="pre">max_lines_count</span></code>, <code class="docutils literal notranslate"><span class="pre">max_boxes_count</span></code> or <code class="docutils literal notranslate"><span class="pre">max_labels_count</span></code> parameters in the
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator">indicator()</a> or
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy">strategy()</a> declaration statements.</p>
<p>In this example we set the maximum quantity of last labels shown on the chart to 100:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Label limits example"</span><span class="p">,</span><span class="w"> </span><span class="nx">max_labels_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="nx">overlay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">true</span><span class="p">)</span><span class="w"></span>
<span class="ni">label.new</span><span class="p">(</span><span class="ni">bar_index</span><span class="p">,</span><span class="w"> </span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="ni">str.tostring</span><span class="p">(</span><span class="no">high</span><span class="p">,</span><span class="w"> </span><span class="ni">format.mintick</span><span class="p">))</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="table-limits">
<h3><a class="toc-backref" href="#id9">Table limits</a><a class="headerlink" href="#table-limits" title="Permalink to this headline">¶</a></h3>
<p>A maximum of nine tables can be displayed by a script, one for each of the possible locations:
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}bottom_center">position.bottom_center</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}bottom_left">position.bottom_left</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}bottom_right">position.bottom_right</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}middle_center">position.middle_center</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}middle_left">position.middle_left</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}middle_right">position.middle_right</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}top_center">position.top_center</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}top_left">position.top_left</a>,
or <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#var_position{dot}top_right">position.top_right</a>.
If you place two tables in the same position, only the most recently added table will be visible.</p>
</div>
</div>
<div class="section" id="request-calls">
<h2><a class="toc-backref" href="#id10">`request.*()` calls</a><a class="headerlink" href="#request-calls" title="Permalink to this headline">¶</a></h2>
<div class="section" id="number-of-calls">
<h3><a class="toc-backref" href="#id11">Number of calls</a><a class="headerlink" href="#number-of-calls" title="Permalink to this headline">¶</a></h3>
<p>A script cannot make more than 40 calls to <code class="docutils literal notranslate"><span class="pre">request.*()</span></code> functions. All instances of calls to these functions are counted,
even if they are included in code blocks or functions that are never actually used in the script’s logic. The functions counting towards this limit are:
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}security">request.security()</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}security_lower_tf">request.security_lower_tf()</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}quandl">request.quandl()</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}financial">request.financial()</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}dividends">request.dividends()</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}earnings">request.earnings()</a> and
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}splits">request.splits()</a>.</p>
</div>
<div class="section" id="intrabars">
<h3><a class="toc-backref" href="#id12">Intrabars</a><a class="headerlink" href="#intrabars" title="Permalink to this headline">¶</a></h3>
<p>When accessing lower timeframes, with
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}security">request.security()</a>
or <a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_request{dot}security_lower_tf">request.security_lower_tf()</a>,
a maximum of 100,000 intrabars can be used in calculations.</p>
<p>The quantity of chart bars covered with 100,000 intrabars will vary with the ratio of the chart’s timeframe to the lower timeframe used,
and with the average number of intrabars contained in each chart bar.
For example, when using a 1min lower timeframe, chart bars at the 60min timeframe of an active 24x7 market will usually contain 60 intrabars each.
Because 100,000 / 60 = 1666.67, the quantity of chart bars covered by the 100,000 intrabars will typically be 1666.
On markets where 60min chart bars do not always contain 60 1min intrabars, more chart bars will be covered.</p>
</div>
</div>
<div class="section" id="script-size-and-memory">
<h2><a class="toc-backref" href="#id13">Script size and memory</a><a class="headerlink" href="#script-size-and-memory" title="Permalink to this headline">¶</a></h2>
<div class="section" id="compiled-tokens">
<h3><a class="toc-backref" href="#id14">Compiled tokens</a><a class="headerlink" href="#compiled-tokens" title="Permalink to this headline">¶</a></h3>
<p>Before a script is executed, it is compiled into a tokenized Intermediate Language (IL).
Using an IL allows Pine Script™ to accommodate longer scripts by applying various optimizations before it is executed.
The compiled form of indicators and strategies is limited to 60,000 tokens; libraries have a limit of 1 million tokens.
There is no way to inspect the number of tokens created during compilation; you will only know your script exceeds the limit when the compiler reaches it.</p>
<p>Replacing code repetitions with function calls and using libraries to offload some of the workload
are the most efficient ways to decrease the number of tokens your compiled script will generate.</p>
<p>The size of variable names and comments do not affect the number of compiled tokens.</p>
</div>
<div class="section" id="local-blocks">
<h3><a class="toc-backref" href="#id15">Local blocks</a><a class="headerlink" href="#local-blocks" title="Permalink to this headline">¶</a></h3>
<p>Local blocks are segments of indented code used in function definitions or in
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_if">if</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_switch">switch</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_for">for</a> or
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_while">while</a> structures, which allow for one or more local blocks.</p>
<p>Scripts are limited to 500 local blocks.</p>
</div>
<div class="section" id="variables">
<h3><a class="toc-backref" href="#id16">Variables</a><a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p>A maximum of 1000 variables are allowed per scope. Pine scripts always contain one global scope, and can contain zero or more local scopes.
Local scopes are created by indented code such as can be found in functions or
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_if">if</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_switch">switch</a>,
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_for">for</a> or
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_while">while</a> structures, which allow for one or more local blocks.
Each local block counts as one local scope.</p>
<p>The branches of a conditional expression using a
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_{question}{colon}">?:</a> ternary operator do not count as local blocks.</p>
</div>
<div class="section" id="arrays-and-matrices">
<h3><a class="toc-backref" href="#id17">Arrays and matrices</a><a class="headerlink" href="#arrays-and-matrices" title="Permalink to this headline">¶</a></h3>
<p>Arrays and matrices are limited to 100,000 elements.</p>
</div>
</div>
<div class="section" id="other-limitations">
<h2><a class="toc-backref" href="#id18">Other limitations</a><a class="headerlink" href="#other-limitations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="maximum-bars-back">
<h3><a class="toc-backref" href="#id19">Maximum bars back</a><a class="headerlink" href="#maximum-bars-back" title="Permalink to this headline">¶</a></h3>
<p>References to past values using the
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#op_op_[]">[]</a>
history-referencing operator are dependent on the size of the historical buffer maintained by the Pine Script™ runtime, which is limited to a maximum of 5000 bars.
<a class="reference external" href="https://www.tradingview.com/?solution=43000587849">This Help Center page</a>
discusses the historical buffer and how to change its size using either the <code class="docutils literal notranslate"><span class="pre">max_bars_back</span></code> parameter or the
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_max_bars_back">max_bars_back()</a> function.</p>
</div>
<div class="section" id="maximum-bars-forward">
<h3><a class="toc-backref" href="#id20">Maximum bars forward</a><a class="headerlink" href="#maximum-bars-forward" title="Permalink to this headline">¶</a></h3>
<p>When positioning drawings using <code class="docutils literal notranslate"><span class="pre">xloc.bar_index</span></code>, it is possible to use bar index values greater than that of the current bar as <em>x</em> coordinates.
A maximum of 500 bars in the future can be referenced.</p>
<p>This example shows how we use the <cite>maxval</cite> parameter in our
<a class="reference external" href="https://www.tradingview.com/pine-script-reference/v5/#fun_input{dot}int">input.int()</a>
function call to cap the user-defined number of bars forward we draw a projection line so that it never exceeds the limit:</p>
<div class="highlight-pine notranslate"><div class="highlight"><pre><span></span><span class="c">//@version=5</span><span class="w"></span>
<span class="ni">indicator</span><span class="p">(</span><span class="s2">"Max bars forward example"</span><span class="p">,</span><span class="w"> </span><span class="nx">overlay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">true</span><span class="p">)</span><span class="w"></span>

<span class="c">// This function draws a `line` using bar index x-coordinates.</span><span class="w"></span>
<span class="nx">drawLine</span><span class="p">(</span><span class="nx">bar1</span><span class="p">,</span><span class="w"> </span><span class="nx">y1</span><span class="p">,</span><span class="w"> </span><span class="nx">bar2</span><span class="p">,</span><span class="w"> </span><span class="nx">y2</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c">// Only execute this code on the last bar.</span><span class="w"></span>
<span class="w">    </span><span class="k">if </span><span class="ni">barstate.islast</span><span class="w"></span>
<span class="w">        </span><span class="c">// Create the line only the first time this function is executed on the last bar.</span><span class="w"></span>
<span class="w">        </span><span class="k">var line </span><span class="nx">lin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">line.new</span><span class="p">(</span><span class="nx">bar1</span><span class="p">,</span><span class="w"> </span><span class="nx">y1</span><span class="p">,</span><span class="w"> </span><span class="nx">bar2</span><span class="p">,</span><span class="w"> </span><span class="nx">y2</span><span class="p">,</span><span class="w"> </span><span class="ni">xloc.bar_index</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="c">// Change the line's properties on all script executions on the last bar.</span><span class="w"></span>
<span class="w">        </span><span class="ni">line.set_xy1</span><span class="p">(</span><span class="nx">lin</span><span class="p">,</span><span class="w"> </span><span class="nx">bar1</span><span class="p">,</span><span class="w"> </span><span class="nx">y1</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="ni">line.set_xy2</span><span class="p">(</span><span class="nx">lin</span><span class="p">,</span><span class="w"> </span><span class="nx">bar2</span><span class="p">,</span><span class="w"> </span><span class="nx">y2</span><span class="p">)</span><span class="w"></span>

<span class="c">// Input determining how many bars forward we draw the `line`.</span><span class="w"></span>
<span class="k">int </span><span class="nx">forwardBarsInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ni">input.int</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">"Forward Bars to Display"</span><span class="p">,</span><span class="w"> </span><span class="nx">minval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">maxval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">500</span><span class="p">)</span><span class="w"></span>

<span class="c">// Calculate the line's left and right points.</span><span class="w"></span>
<span class="k">int </span><span class="w">  </span><span class="nx">leftBar</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="ni">bar_index</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="w"></span>
<span class="k">float </span><span class="nx">leftY</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="no">high</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="w"></span>
<span class="k">int </span><span class="w">  </span><span class="nx">rightBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">leftBar</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">forwardBarsInput</span><span class="w"></span>
<span class="k">float </span><span class="nx">rightY</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nx">leftY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="ni">ta.change</span><span class="p">(</span><span class="no">high</span><span class="p">)</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">forwardBarsInput</span><span class="p">)</span><span class="w"></span>

<span class="c">// This function call is executed on all bars, but it only draws the `line` on the last bar.</span><span class="w"></span>
<span class="nx">drawLine</span><span class="p">(</span><span class="nx">leftBar</span><span class="p">,</span><span class="w"> </span><span class="nx">leftY</span><span class="p">,</span><span class="w"> </span><span class="nx">rightBar</span><span class="p">,</span><span class="w"> </span><span class="nx">rightY</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="chart-bars">
<h3><a class="toc-backref" href="#id21">Chart bars</a><a class="headerlink" href="#chart-bars" title="Permalink to this headline">¶</a></h3>
<p>The number of bars appearing on charts is dependent on the amount of historical data available for the chart’s symbol and timeframe,
and on the type of account you hold. When the required historical date is available, the minimum number of chart bars is:</p>
<blockquote>
<div><ul class="simple">
<li>20,000 bars for the Premium plan.</li>
<li>10,000 bars for Pro and Pro+ plans.</li>
<li>5000 bars for other plans.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="trade-orders-in-backtesting">
<h3><a class="toc-backref" href="#id22">Trade orders in backtesting</a><a class="headerlink" href="#trade-orders-in-backtesting" title="Permalink to this headline">¶</a></h3>
<p>A maximum of 9000 orders can be placed when backtesting strategies.
When using Deep Backtesting, the limit is 200,000.</p>
<a class="reference external image-reference" href="https://www.tradingview.com/"><div align="center" class="align-center"><img alt="../_images/TradingView-Logo-Block.svg" src="../_images/TradingView-Logo-Block.svg" width="200px"/></div>
</a>
</div>
</div>
</div>
</div>
<div class="footer-relations">
<div class="pull-left">
<a class="btn btn-default" href="Publishing.html" title="previous chapter (use the left arrow)">Publishing scripts</a>
</div>
<div class="pull-right">
<a class="btn btn-default" href="../Faq.html" title="next chapter (use the right arrow)">FAQ</a>
</div>
</div>
<div class="clearer"></div>
</div>